%li.item{id: "item-#{item.id}"}

  %h4
    %i.fa.fa-fw.item-type-icon{class: "fa-#{item_type_icon(item.item_type)}"}
    .item-name= item.name

    %ul.tools-dropdown
      %li.dropdown
        %a.dropdown-toggle{href: "#", data: { toggle: "dropdown" }}
          %i.fa.fa-angle-down
        %ul.dropdown-menu
          %li
            = link_to edit_project_item_path(item.project, item), remote: true do
              %i.fa.fa-pencil
          %li
            = link_to [item.project, item], method: :delete, data: { confirm: "Are you sure?" } do
              %i.fa.fa-trash-o

    = link_to "javascript:;",
      data: { toggle: "collapse", target: "#item-#{item.id}-addTask" },
      class: "btn btn-default btn-xs add-task-btn pull-right" do
      %i.fa.fa-plus

    .btn-group.item-status.pull-right
      %button.btn.btn-xs.btn-title.dropdown-btn{type: "button", class: "btn-#{status_label(item.status)}"}
        %i.fa.fa-fw{class: "fa-#{status_icon(item.status)}"}
        = item.status

      %button.btn.btn-xs.dropdown-toggle.dropdown-btn{type: "button", class: "btn-#{status_label(item.status)}", data: { toggle: "dropdown" }}
        %span.caret
        %span.sr-only Toggle Dropdown

      %ul.dropdown-menu.pull-right{role: "menu"}

        - statuses.each do |status_name|
          = link_to project_item_path(item.project, item, item: { status: status_name }), method: :patch do
            %li.dropdown-menu-item
              %i.fa.fa-caret-right{style: "#{'visibility: hidden' unless item.status == status_name}"}
              = status_name

  .collapse{id: "item-#{item.id}-addTask"}
    = render "tasks/new", item: item

  .tasks-list-box{id: "item-#{item.id}-tasks", style: "#{'margin-bottom: 15px;' if item.tasks.any?}"}
    = render "items/tasks", tasks: item.tasks, item_id: item.id
