<div class="row"><div class="col-md-6 col-md-offset-3">

  <div class="panel panel-default">

    <div class="panel-heading"><h3 class="panel-title"><i class='fa fa-folder'></i> Edit Project</h3></div>

    <div class="panel-body">
      <%= form_for(@project) do |f| %>

        <% if @project.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:</h2>
            <ul><% @project.errors.full_messages.each do |msg| %><li><%= msg %></li><% end %></ul>
          </div>
        <% end %>

        <fieldset>

          <div class="form-group">
             <%= f.collection_select(:product_id, Product.all, :id , :name, {:include_blank => true}, {:class => 'form-control' }) %>
          </div>

          <div class="form-group">
            <%= f.text_field :name, :placeholder => "Project Name", class: "form-control", :autofocus => true %>
          </div>

          <div class="form-group">
            <%= f.text_area :description, :placeholder => "Description", class: "form-control" %>
          </div>

          <div class="form-group">
            <%= f.date_field :due_date, class: "form-control" %>
          </div>

          <div class="form-group">
             <%= f.select(:priority, [['None', 0],['Low', 1],['Medium', 2], ['High', 3]], {}, { :class => 'form-control' }) %>
          </div>


          <hr>

          <div class="form-group">
             <%= f.select(:status, [['Incomplete'],['In Progress'],['Completed']], {}, { :class => 'form-control' }) %>
          </div>

          <div class="form-group">
           <%  User.all(:order => "name ASC").each_with_index do |user,idx| %>
              <%= check_box_tag "project[assignments_attributes][#{idx}][user_id]", user.id, @project.user_ids.include?(user.id) %>
              <%= user.name %>
              <br>
          <% end %>
        </div>

          <% if false %>
          <div class="form-group">
            <%= hidden_field_tag "project[user_id][]", nil %>
            <% User.all.each do |user| %>
              <%= check_box_tag "project[user_id][]", user.id, @project.user_ids.include?(user.id), id: dom_id(user) %>
              <%= label_tag dom_id(user), user.name %><br>
            <% end %>
          </div>
          <% end %>


        <% if false %>
          <%= f.fields_for :assignments do |builder| %>
            <% if builder.object.new_record? %>
              <div class="form-group">
                <%= builder.collection_select(:user_id, User.all, :id , :name, {:include_blank => true}, {:class => 'form-control' }) %>
              </div>
              <% else %>
                <%= builder.object.user.name %>  <%= builder.check_box :_destroy %><%= builder.label :_destroy, "Remove User" %><br>
              <% end %>
          <% end %>
        <% end %>




          <%= f.submit "Save", class: "btn btn-md btn-success btn-block" %>

        </fieldset>

      <% end %>

    </div>

  </div>

</div></div>